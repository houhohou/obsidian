파트장님의 all_in_one(인턴2차과제) 오픈스택 서버 구성 검수 및 피드백: 
- virsh도 쓸줄 알아야될듯? 
- DB가 무슨 역할함? DB에는 오픈스택의 모든 껍데기가 거의 다 저장됨 
- db를 바꾼다고 해도 겉의 값만 바뀌고 오픈스택 서비스들 당장은 되겠지만, 껏다 키거나, 시스템 재시작 하면 안될거임(물론 vm이 죽는건 아님). 나비효과 지림. 그니까 db 건드릴때 매우 유의. db 날리면 ㅈ됨. 그래서 db 3중화 하는거임 
- 오케스트로의 경우 controller node의 로컬 영역에 db 저장함(스토리지 노드 말고) 
- 만약 오픈스택 서비스를 운영하는 서버를 그대로 migration/백업 하고싶은 경우 db랑 conf 파일들만 있으면됨(저걸 다른 노드에 옮겨주기만 하면됨) 
- 오케의 콘트라베이스가 레퍼런스가 있는 conf 파일임(이것저것 커스터마이징한) 
- 오픈스택은 사실 공홈 docs 대로 설치하는게 제일 best이고 빠릿 빠릿함 - ml2 이런거 왜 설정하는건지 클라이언트들이 물어볼거임 
- iaas 엔지니어로서 구축은 10%, 특정 conf를 왜 쓰는지 이해도 40%, 나머지 50%는 client에게 설명할 수 있는 능력을 갖춰야함 
- 오픈스택과 관련된 모든 요청(call)은 endpoint에 하는거다. ENDPOINT 유심히 봐야함 
- keystone은 endpoint로 요청 후 접근 하는 인증 방식, glance api를 아니까 그 endpoint로 요청해서 접근하는거임 
- 오케의 conf 레퍼런스 요구사항중 하나: ‘cotroller’ 대신 ip를 직접 써넣기. 왜냐면 성능에는 의미있는 차이가 있지 않지만 ip가 직접 보임으로서 좀 더 명확하게 구별?할 수 있어서(대신 이건 취향 차이긴 함. 개인적으로 할때는 ‘controller’ 써도됨. 오히려 그게 나중에 만약 ip를 한번에 바꿔야하는 일이 생기면 훨씬 편함) 
- glance쪽 3중화 할때 아마 무조건 트러블슈팅 하게 될거임(대부분이 겪는 문제임) - placement는 자원관리 서비스이고 nova에 의존적인, 상호보완적인 서비스임 - 오픈스택 서버에서 compute 서비스 ‘제공’은 무엇이 하냐 라고 물어보면 kvm이다 nova가 아니라. 엄밀히 따지면 nova는 kvm이 제공한 compute serivce를 관리하는거다 
- nova 스케쥴러의 판단은 placement가 한다. 스케쥴러의 의사결정을 placement api를 통해서 함. placement에 모든 자원들의 정보가 있다. 근데 nova 스케쥴러가 완벽하진 않다. 스케쥴링을 전체 자원을 기준으로 하기 때문에 코어나 다른 것들을 따지진 않는다(대신 설정해줄순 있다 
메타데이터 설정등을 통해(이건 내 생각)) 
- l2(직접 연결 = linux bridge) 와 l3(sdn 네트워크 가상화 = ovs) 차이 숙지해라, ovs가 더 기능많고 좋음(물론 요즘 버전의 linux bridge는 좋아졌을지도..?) 
- 네트워크 트래픽 흐름 이해해라 
- br-provider: 외부 네트워크만 있는거 아니고 내부 대역을 클라이언트가 쓰고싶다고 요구하면 우리는 외부통신 가능한 인터페이스 하나 달라하면됨 물리적인 인터페이스 있으면 브릿지에 꽂고 그럼 다 넘겨줄수있음(파밀리 데이터 사업처럼) 
- 오픈스택 서비스 (예: horizon에서 project 쪽) 안에서 만드는 네트워크는 내부 네트워크다(overlay). admin쪽에서 만드는 네트워크는 underlay(실제) 네트워크다? - 네트워크 구성시 인터페이스 최소 2개 필요함(ip 박을거 하나랑…. 
- neutron은 가상네트워크를 관리하는 것(제공은 ovs가 하는거) 
- cinder도 block storage를 관리하는 것(제공은 backend가), 근데 lvm은 cinder가 직접 만드는게 맞음 
- 3중화 방식 구조 이해하는거 어렵다. 이건 구축만이라도 해봐라 - 3중화 할때 3개의 노드(all in one 3개)들이 clustering 되어 있어야함(rabbitmq도, db도, ntp도?) 
- 오픈스택…???…은 클러스터링을 해주지는 않음(오픈스택 설치했을때 컨트롤러 노드가 1,2,3번 이렇게 쭉 맺어지는 것처럼 보이지 않는데…?) 근데 이게 왜 3중화냐? 고민해봐 
- 일단 all in one으로 구축해보고 나중에 compute controller storage 노드로 나눠봐 그게 더 공부에 도움됨 
- ntp도 clustering 해줘야되는데 왜하는지 이해하렴 
- repo 서버 구축 → OS 설치 → 3중화 → 오픈스택 서비스 설치 순으로 해봐 
- 접속용 ip는 레포서버 사설 네트워크 통하게 구성 
- 사설 대역은 맘대로 구성해도됨(vsphere에서 네트워크 편집에서 vmnet1~3 아무거나) 
- 오픈스택의 vm들 네트워크는 34 대역 통해서 실제로 통신 되게 구성 
- 34대역의 역할은 뭐야? = 통로이자 관리를할 수 있는 대역
- 사내서버들 설정파일들 보거나, 선배들, 파트장님한테 물어보거나, 구글링 하거나 뭐든 상관 없는데 왜 하는지 이해를 해야함


